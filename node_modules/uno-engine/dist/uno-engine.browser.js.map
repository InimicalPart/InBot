{"version":3,"sources":["webpack://Uno/webpack/universalModuleDefinition","webpack://Uno/webpack/bootstrap","webpack://Uno/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://Uno/./node_modules/shuffle/lib/index.js","webpack://Uno/./node_modules/events/events.js","webpack://Uno/./node_modules/util/util.js","webpack://Uno/./node_modules/util/support/isBufferBrowser.js","webpack://Uno/./node_modules/inherits/inherits_browser.js","webpack://Uno/./node_modules/shuffle/lib/deck.js","webpack://Uno/./node_modules/shuffle/lib/playingCardDeck.js","webpack://Uno/./node_modules/shuffle/lib/playingCard.js","webpack://Uno/./src/card/colors.ts","webpack://Uno/./src/card/values.ts","webpack://Uno/./src/card/card.ts","webpack://Uno/./src/events/event.ts","webpack://Uno/./src/events/game-events.ts","webpack://Uno/./src/deck.ts","webpack://Uno/./src/events/cancelable-emitter.ts","webpack://Uno/./src/game-directions.ts","webpack://Uno/./src/player.ts","webpack://Uno/./src/game.ts"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","obj","configurable","writable","deck","playingCardDeck","shuffle","defaultOptions","cards","random","Math","playingCards","options","ReflectOwnKeys","R","Reflect","ReflectApply","apply","target","receiver","args","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","EventEmitter","init","this","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","TypeError","_getMaxListeners","that","_addListener","type","prepend","events","existing","warning","newListener","emit","unshift","push","length","warned","w","Error","String","emitter","count","console","warn","onceWrapper","fired","removeListener","wrapFn","arguments","_onceWrap","state","wrapped","_listeners","unwrap","evlistener","arr","ret","Array","unwrapListeners","arrayClone","listenerCount","copy","set","arg","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","err","message","context","handler","len","listeners","addListener","on","prependListener","once","prependOnceListener","list","position","originalListener","shift","index","pop","spliceOne","off","removeAllListeners","keys","rawListeners","eventNames","getOwnPropertyDescriptors","descriptors","getOwnPropertyDescriptor","formatRegExp","format","f","isString","objects","inspect","join","str","replace","x","JSON","stringify","_","isNull","isObject","deprecate","fn","msg","process","noDeprecation","throwDeprecation","traceDeprecation","trace","debugEnviron","debugs","opts","ctx","seen","stylize","stylizeNoColor","depth","colors","isBoolean","showHidden","_extend","isUndefined","customInspect","stylizeWithColor","formatValue","styleType","style","styles","recurseTimes","isFunction","constructor","primitive","simple","isNumber","formatPrimitive","visibleKeys","array","hash","forEach","val","idx","arrayToHash","isError","indexOf","formatError","isRegExp","RegExp","toString","isDate","Date","output","base","braces","isArray","toUTCString","formatProperty","match","formatArray","map","reduce","prev","cur","numLinesEst","reduceToSingleString","desc","split","line","substr","ar","re","objectToString","e","pad","debuglog","env","NODE_DEBUG","toUpperCase","test","pid","isNullOrUndefined","isSymbol","isPrimitive","isBuffer","months","timestamp","time","getHours","getMinutes","getSeconds","getDate","getMonth","prop","log","inherits","origin","add","kCustomPromisifiedSymbol","callbackifyOnRejected","reason","cb","newReason","promisify","original","promiseResolve","promiseReject","promise","Promise","resolve","reject","setPrototypeOf","defineProperties","custom","callbackify","callbackified","maybeCb","self","then","nextTick","rej","fill","readUInt8","ctor","superCtor","super_","TempCtor","reset","slice","j","floor","tempi","tempj","fisherYates","deal","numberOfCards","arrayOfHands","draw","num","drawFromBottomOfDeck","drawRandom","_draw","card","splice","putOnTopOfDeck","putOnBottomOfDeck","playingCard","suit","description","sort","toShortDisplayString","substring","Colors","Values","Card","color","_value","_color","isWildCard","WILD","WILD_DRAW_FOUR","isSpecialCard","DRAW_TWO","REVERSE","SKIP","matches","other","is","defaults","isCancelable","Event","_type","_isCancelable","_canceled","assign","preventDefault","BeforeDrawEvent","player","quantity","super","DrawEvent","BeforePassEvent","BeforeCardPlayEvent","CardPlayEvent","NextPlayerEvent","GameEndEvent","winner","score","createUnoDeck","createCards","qty","ZERO","ONE","NINE","Deck","CancelableEventEmitter","eventName","event","canceled","data","dispatchEvent","every","GameDirections","Player","trim","getCardByValue","hand","find","hasCard","some","removeCard","findIndex","valueOf","Game","playerNames","houseRules","_players","fixPlayers","rule","setup","newGame","drawPile","direction","CLOCKWISE","_discardedCard","min","max","_currentPlayer","getPlayer","getPlayerIndex","getNextPlayer","dir","COUNTER_CLOCKWISE","reverseGame","silent","drawnCards","privateDraw","drawn","yellers","pass","goToNextPlayer","play","currentPlayer","calculateScore","uno","yellingPlayer","drawingPlayers","filter","uniq","a","b","findDuplicates","playerName","reverse","amount"],"mappings":"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","file":"uno-engine.browser.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Uno\"] = factory();\n\telse\n\t\troot[\"Uno\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","var util = require('util');\nvar deck = require('./deck');\nvar playingCardDeck = require('./playingCardDeck');\nvar shuffle = module.exports = {};\nvar defaultOptions = {\n  deck: new playingCardDeck().cards,\n  random: function(){ return Math.random(); }\n};\n\nshuffle.playingCards = function(){\n  return new playingCardDeck().cards;\n}\n\nshuffle.shuffle = function(options){\n  if(!options)\n    options = defaultOptions;\n\n  if(!options.deck)\n    options.deck = defaultOptions.deck;\n  if(!options.random)\n    options.random = defaultOptions.random;\n\n  return new deck(options.deck, options.random);\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n  function getOwnPropertyDescriptors(obj) {\n    var keys = Object.keys(obj);\n    var descriptors = {};\n    for (var i = 0; i < keys.length; i++) {\n      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n    }\n    return descriptors;\n  };\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  }\n\n  // Allow for deprecating things in the process of starting up.\n  if (typeof process === 'undefined') {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function')\n    throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(\n    fn,\n    getOwnPropertyDescriptors(original)\n  );\n}\n\nexports.promisify.custom = kCustomPromisifiedSymbol\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  }\n\n  // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n  function callbackified() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n    var self = this;\n    var cb = function() {\n      return maybeCb.apply(self, arguments);\n    };\n    // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n    original.apply(this, args)\n      .then(function(ret) { process.nextTick(cb, null, ret) },\n            function(rej) { process.nextTick(callbackifyOnRejected, rej, cb) });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified,\n                          getOwnPropertyDescriptors(original));\n  return callbackified;\n}\nexports.callbackify = callbackify;\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","module.exports = function(cards, random){\n  this.reset = function(){\n    this.cards = cards.slice(0);\n    this.length = this.cards.length;\n  };\n  this.shuffle = function(){\n    fisherYates(this.cards);\n  };\n\n  this.reset();\n  this.shuffle();\n\n  this.deal = function(numberOfCards, arrayOfHands){\n    for(var i = 0; i < numberOfCards; i++)\n      for(var j = 0; j < arrayOfHands.length; j++)\n        arrayOfHands[j].push(this.cards.pop());\n    this.length = this.cards.length;\n  };\n\n  this.draw = function(num){\n    if(!num || num <= 1){\n      this.length = this.cards.length - 1;\n      return this.cards.pop();\n    }\n\n    var ret = [];\n    for(var i = 0; i < num; i++)\n      ret.push(this.cards.pop());\n    this.length = this.cards.length;\n    return ret;\n  };\n\n  this.drawFromBottomOfDeck = function(num){\n    if(!num || num < 1) {\n      num = 1;\n    }\n\n    var ret = [];\n    for(var i = 0; i < num; i++) {\n      ret.push(this.cards.shift());\n    }\n    this.length = this.cards.length;\n\n    if (ret.length === 1) {\n      return ret[0];\n    } else {\n      return ret;\n    }\n  };\n\n  this.drawRandom = function(num){\n    var _draw = function(){\n      var index = Math.floor(random() * this.cards.length);\n      var card = this.cards[index];\n      this.cards.splice(index, 1);\n      this.length = this.cards.length;\n      return card;\n    };\n\n    if(!num || num <= 1){\n      return _draw.apply(this);\n    }else{\n      var cards = [];\n      for(var i = 0; i < num; i++){\n        cards.push(_draw.apply(this));\n      }\n      return cards;\n    }\n  };\n\n  this.putOnTopOfDeck = function(cards){\n    if(!cards instanceof Array)\n      this.cards.push(cards);\n    else\n      for(var i = 0; i < cards.length; i++)\n        this.cards.push(cards[i]);\n    this.length = this.cards.length;\n  };\n\n  this.putOnBottomOfDeck = function(cards){\n    if(!cards instanceof Array)\n      this.cards.unshift(cards);\n    else\n      for(var i = 0; i < cards.length; i++)\n        this.cards.unshift(cards[i]);\n    this.length = this.cards.length;\n  };\n\n  //array shuffling algorithm: http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle\n  function fisherYates(arr){\n    var i = arr.length;\n    if(i === 0)\n      return false;\n    while(--i){\n       var j = Math.floor(random() * (i + 1));\n       var tempi = arr[i];\n       var tempj = arr[j];\n       arr[i] = tempj;\n       arr[j] = tempi;\n    }\n  }\n};\n","var playingCard = require('./playingCard');\n\nmodule.exports = function(){\n  this.cards = [\n    new playingCard('Club', 'Two', 2),\n    new playingCard('Club', 'Three', 3),\n    new playingCard('Club', 'Four', 4),\n    new playingCard('Club', 'Five', 5),\n    new playingCard('Club', 'Six', 6),\n    new playingCard('Club', 'Seven', 7),\n    new playingCard('Club', 'Eight', 8),\n    new playingCard('Club', 'Nine', 9),\n    new playingCard('Club', 'Ten', 10),\n    new playingCard('Club', 'Jack', 11),\n    new playingCard('Club', 'Queen', 12),\n    new playingCard('Club', 'King', 13),\n    new playingCard('Club', 'Ace', 14),\n    new playingCard('Diamond', 'Two', 2),\n    new playingCard('Diamond', 'Three', 3),\n    new playingCard('Diamond', 'Four', 4),\n    new playingCard('Diamond', 'Five', 5),\n    new playingCard('Diamond', 'Six', 6),\n    new playingCard('Diamond', 'Seven', 7),\n    new playingCard('Diamond', 'Eight', 8),\n    new playingCard('Diamond', 'Nine', 9),\n    new playingCard('Diamond', 'Ten', 10),\n    new playingCard('Diamond', 'Jack', 11),\n    new playingCard('Diamond', 'Queen', 12),\n    new playingCard('Diamond', 'King', 13),\n    new playingCard('Diamond', 'Ace', 14),\n    new playingCard('Heart', 'Two', 2),\n    new playingCard('Heart', 'Three', 3),\n    new playingCard('Heart', 'Four', 4),\n    new playingCard('Heart', 'Five', 5),\n    new playingCard('Heart', 'Six', 6),\n    new playingCard('Heart', 'Seven', 7),\n    new playingCard('Heart', 'Eight', 8),\n    new playingCard('Heart', 'Nine', 9),\n    new playingCard('Heart', 'Ten', 10),\n    new playingCard('Heart', 'Jack', 11),\n    new playingCard('Heart', 'Queen', 12),\n    new playingCard('Heart', 'King', 13),\n    new playingCard('Heart', 'Ace', 14),\n    new playingCard('Spade', 'Two', 2),\n    new playingCard('Spade', 'Three', 3),\n    new playingCard('Spade', 'Four', 4),\n    new playingCard('Spade', 'Five', 5),\n    new playingCard('Spade', 'Six', 6),\n    new playingCard('Spade', 'Seven', 7),\n    new playingCard('Spade', 'Eight', 8),\n    new playingCard('Spade', 'Nine', 9),\n    new playingCard('Spade', 'Ten', 10),\n    new playingCard('Spade', 'Jack', 11),\n    new playingCard('Spade', 'Queen', 12),\n    new playingCard('Spade', 'King', 13),\n    new playingCard('Spade', 'Ace', 14)\n  ];\n}","module.exports = function(suit, description, sort){\n  this.suit = suit;\n  this.description = description;\n  this.sort = sort;\n\n  this.toString = function(){\n    return this.description + ' of ' + this.suit + 's';\n  }\n\n  this.toShortDisplayString = function(){\n    var suit = this.suit.substring(0,1);\n    var value;\n    switch(this.sort){\n      case 11:\n        value = 'J';\n        break;\n      case 12:\n        value = 'Q';\n        break;\n      case 13:\n        value = 'K';\n        break;\n      case 14:\n        value = 'A';\n        break;\n      default:\n        value = this.sort;\n    }\n    return value + suit;\n  }\n};\n","export enum Colors {\n  RED = 1,\n  BLUE = 2,\n  GREEN = 3,\n  YELLOW = 4,\n}\n","export enum Values {\n  // numbers\n  ZERO = 0,\n  ONE = 1,\n  TWO = 2,\n  THREE = 3,\n  FOUR = 4,\n  FIVE = 5,\n  SIX = 6,\n  SEVEN = 7,\n  EIGHT = 8,\n  NINE = 9,\n  // special cards\n  DRAW_TWO = 10,\n  REVERSE = 11,\n  SKIP = 12,\n  WILD = 13,\n  WILD_DRAW_FOUR = 14,\n}\n","import { Colors } from './colors';\nimport { Values } from './values';\n\nexport class Card {\n  private _value: Values;\n  private _color: Colors | null;\n\n  constructor(value: Values, color?: Colors) {\n    this._value = value;\n    this._color = color === undefined ? undefined : color;\n\n    if (!this.isWildCard() && this.color === undefined) {\n      throw Error('Only wild cards can be initialized with no color');\n    }\n  }\n\n  get color() {\n    return this._color;\n  }\n\n  set color(color: Colors) {\n    if (!this.isWildCard())\n      throw new Error('Only wild cards can have theirs colors changed.');\n    else if (typeof color === 'undefined' || color < 1 || color > 4)\n      throw new Error('The color must be a value from Colors enum.');\n\n    this._color = color;\n  }\n\n  get value() {\n    return this._value;\n  }\n\n  isWildCard() {\n    return this.value === Values.WILD || this.value === Values.WILD_DRAW_FOUR;\n  }\n\n  isSpecialCard() {\n    return (\n      this.isWildCard() ||\n      this.value === Values.DRAW_TWO ||\n      this.value === Values.REVERSE ||\n      this.value === Values.SKIP\n    );\n  }\n\n  matches(other: Card) {\n    if (this.isWildCard()) return true;\n    else if (this.color === undefined || other.color === undefined)\n      throw new Error(\n        'Both cards must have theirs colors set before comparing',\n      );\n\n    return other.value === this.value || other.color === this.color;\n  }\n\n  get score() {\n    switch (this.value) {\n      case Values.DRAW_TWO:\n      case Values.SKIP:\n      case Values.REVERSE:\n        return 20;\n      case Values.WILD:\n      case Values.WILD_DRAW_FOUR:\n        return 50;\n      default:\n        return this.value;\n    }\n  }\n\n  is(value: Values, color?: Colors) {\n    let matches = this.value === value;\n    if (!!color) matches = matches && this.color === color;\n    return matches;\n  }\n\n  toString() {\n    return `${Colors[this.color] || 'NO_COLOR'} ${Values[this.value]}`;\n  }\n}\n","export interface EventOptions {\n  /**\n   * @default false\n   */\n  isCancelable: boolean;\n}\n\nconst defaults: EventOptions = {\n  isCancelable: true,\n};\n\nexport class Event {\n  private _type: string;\n  private _isCancelable: boolean;\n  private _canceled: boolean;\n\n  get type() {\n    return this._type;\n  }\n\n  get isCancelable() {\n    return this._isCancelable;\n  }\n\n  get canceled() {\n    return this._canceled;\n  }\n\n  constructor(type: string, options?: Partial<EventOptions>) {\n    if (!type) throw new Error('Event type is mandatory');\n\n    options = Object.assign({}, defaults, options) as EventOptions;\n\n    if (typeof options.isCancelable === 'undefined')\n      options.isCancelable = true;\n\n    this._type = type;\n    this._isCancelable = options.isCancelable;\n    this._canceled = false;\n  }\n\n  preventDefault() {\n    if (this.isCancelable) this._canceled = true;\n  }\n}\n","import { Card } from '../card';\nimport { Player } from '../player';\nimport { Event } from './event';\n\n/**\n * Fired when a player requests cards from the draw pile.\n */\nexport class BeforeDrawEvent extends Event {\n  /**\n   * @param {Player} player  thatThe player will draw\n   * @param {number} quantity The quantity of cards will be drawn\n   */\n  constructor(\n    public readonly player: Player,\n    public readonly quantity: number,\n  ) {\n    super('beforedraw');\n  }\n}\n\n/**\n * Fired after player's drawn cards are added to his hands.\n */\nexport class DrawEvent extends Event {\n  /**\n   * @param {Player} player The player that has drawn\n   * @param {Card[]} cards The cards that were drawn\n   */\n  constructor(public readonly player: Player, public readonly cards: Card[]) {\n    super('draw');\n  }\n}\n\n/**\n * Fired when a player can pass and requests to pass its turn.\n */\nexport class BeforePassEvent extends Event {\n  /**\n   * @param {Player} player The player that will pass\n   */\n  constructor(public readonly player: Player) {\n    super('beforepass');\n  }\n}\n\n/**\n * Fired before player discards a card in the discard pile.\n */\nexport class BeforeCardPlayEvent extends Event {\n  /**\n   * @param {Card} card The card that will be played\n   * @param {Player} player The player that will play\n   */\n  constructor(public readonly card: Card, public readonly player: Player) {\n    super('beforecardplay');\n  }\n}\n\n/**\n * Fired after player's card is thrown in the discard pile.\n */\nexport class CardPlayEvent extends Event {\n  /**\n   * @param {Card} card The card that was played\n   * @param {Player} player The player that played\n   */\n  constructor(public readonly card: Card, public readonly player: Player) {\n    super('cardplay');\n  }\n}\n\n/**\n * Fired when {@link game#currentPlayer | currentPlayer} changes.\n */\nexport class NextPlayerEvent extends Event {\n  /**\n   * @param {Player} player The new player\n   */\n  constructor(public readonly player: Player) {\n    super('nextplayer');\n  }\n}\n\n/**\n * Fired when `winner` has 0 cards at hand.\n */\nexport class GameEndEvent extends Event {\n  /**\n   * @param {Player} winner The big winner\n   * @param {number} score Player's final score\n   */\n  constructor(public readonly winner: Player, public readonly score: number) {\n    super('end', {\n      isCancelable: false,\n    });\n  }\n}\n","import { shuffle } from 'shuffle';\nimport { Card, Colors, Values } from './card';\n\nfunction createUnoDeck() {\n  /*\n    108 cards\n\n    76x numbers (0-9, all colors)\n    8x draw two (2x each color)\n    8x reverse (2x each color)\n    8x skip (2x each color)\n    4x wild\n    4x wild draw four\n  */\n\n  const deck: Card[] = [];\n\n  const createCards = (qty: number, value: Values, color?: Colors) => {\n    const cards = [];\n\n    for (let i = 0; i < qty; i++) cards.push(new Card(value, color));\n\n    return cards;\n  };\n\n  // for each color...\n  for (let color = 1; color <= 4; color++) {\n    // CREATE NUMBERS\n    deck.push.apply(deck, createCards(1, Values.ZERO, color));\n    for (let n = Values.ONE; n <= Values.NINE; n++) {\n      deck.push.apply(deck, createCards(2, n, color));\n    }\n\n    deck.push.apply(deck, createCards(2, Values.DRAW_TWO, color));\n    deck.push.apply(deck, createCards(2, Values.SKIP, color));\n    deck.push.apply(deck, createCards(2, Values.REVERSE, color));\n  }\n\n  deck.push.apply(deck, createCards(4, Values.WILD));\n  deck.push.apply(deck, createCards(4, Values.WILD_DRAW_FOUR));\n\n  return deck;\n}\n\nexport class Deck {\n  private originalDraw: Function;\n  private shuffle = shuffle({ deck: createUnoDeck() });\n\n  get cards() {\n    return this.shuffle.cards;\n  }\n\n  get length() {\n    return this.shuffle.length;\n  }\n\n  constructor() {}\n\n  draw(num?: number) {\n    num = num || 1;\n    let cards: Card[] = [];\n\n    // if the amount to draw is more than the cards we have...\n    if (num >= this.length) {\n      const length = this.length;\n\n      // draw all we have...\n      cards = cards.concat(this.shuffle.draw.call(this, length));\n\n      // regenerate the draw pile\n      this.shuffle.reset();\n      this.shuffle.shuffle();\n\n      // then draw the rest we need\n      num = num - length;\n      if (num === 0) return cards;\n    }\n\n    return cards.concat(this.shuffle.draw(num));\n  }\n}\n","import { EventEmitter } from 'events';\nimport { Event } from './event';\n\nfunction createProxyListener(originalListener: Function, context: any) {\n  return function(event: Event) {\n    const returnValue = originalListener.call(context, event);\n    const shouldContinue = returnValue !== false;\n\n    if (!shouldContinue) event.preventDefault();\n\n    // console.log(\"cancel?\", !shouldContinue);\n    return !event.canceled;\n  };\n}\n\nexport class CancelableEventEmitter extends EventEmitter {\n  on(eventName: string, listener: Function) {\n    return super.on(eventName, createProxyListener(listener, this));\n  }\n\n  emit(type: string, data?: any): boolean {\n    throw new Error('Event dispatching must be done via #dispatchEvent');\n  }\n\n  /**\n   * @param {Event} event\n   */\n  dispatchEvent(event: Event) {\n    return this.listeners(event.type).every((handler: Function) =>\n      handler(event),\n    );\n  }\n}\n","export enum GameDirections {\n  CLOCKWISE = 1,\n  COUNTER_CLOCKWISE = 2,\n}\n","import { Card, Values } from './card';\n\nexport class Player {\n  name: string;\n  hand: Card[] = [];\n\n  constructor(name: string) {\n    name = !!name ? name.trim() : name;\n    if (!name) throw new Error('Player must have a name');\n\n    this.name = name;\n  }\n\n  getCardByValue(value: Values) {\n    if (!value) return undefined;\n\n    return this.hand.find(c => c.value === value);\n  }\n\n  hasCard(card: Card) {\n    if (!card) return false;\n\n    return this.hand.some(\n      c => c.value === card.value && c.color === card.color,\n    );\n  }\n\n  removeCard(card: Card) {\n    if (!this.hasCard(card)) return;\n\n    const i = this.hand.findIndex(\n      c => c.value === card.value && c.color === card.color,\n    );\n    this.hand.splice(i, 1);\n  }\n\n  valueOf() {\n    return this.name;\n  }\n\n  toString() {\n    return this.name;\n  }\n}\n","import { Card, Values } from './card';\nimport { Deck } from './deck';\nimport {\n  BeforeCardPlayEvent,\n  BeforeDrawEvent,\n  BeforePassEvent,\n  CancelableEventEmitter,\n  CardPlayEvent,\n  DrawEvent,\n  GameEndEvent,\n  NextPlayerEvent,\n} from './events';\nimport { GameDirections } from './game-directions';\nimport { Player } from './player';\n\nconst CARDS_PER_PLAYER = 7;\n\nexport class Game extends CancelableEventEmitter {\n  // events:\n  /**\n   * @event Game#beforedraw\n   * @type {BeforeDrawEvent}\n   */\n  /**\n   * @event Game#draw\n   * @type {DrawEvent}\n   */\n  /**\n   * @event Game#beforepass\n   * @type {BeforePassEvent}\n   */\n  /**\n   * @event Game#beforecardplay\n   * @type {BeforeCardPlayEvent}\n   */\n  /**\n   * @event Game#cardplay\n   * @type {CardPlayEvent}\n   */\n  /**\n   * @event Game#nextplayer\n   * @type {NextPlayerEvent}\n   */\n  /**\n   * @event Game#end\n   * @type {GameEndEvent}\n   */\n\n  private drawPile: Deck;\n  private direction: GameDirections;\n  private _currentPlayer: Player;\n  private _players: Player[] = [];\n  private _discardedCard: Card;\n\n  // control vars\n  /**\n   * The player have draw in his turn?\n   */\n  private drawn = false;\n  /**\n   * Who yelled uno?\n   *\n   * key: player name\n   * value: true/false\n   */\n  private yellers: { [key: string]: boolean } = {};\n\n  constructor(playerNames: string[], houseRules: { setup: Function }[] = []) {\n    super();\n\n    this._players = this.fixPlayers(playerNames);\n    houseRules.forEach(rule => rule.setup(this));\n    this.newGame();\n  }\n\n  newGame() {\n    this.drawPile = new Deck();\n    this.direction = GameDirections.CLOCKWISE;\n\n    this._players.forEach(p => (p.hand = this.drawPile.draw(CARDS_PER_PLAYER)));\n\n    // do not start with special cards (REVERSE, DRAW, etc)\n    do {\n      this._discardedCard = this.drawPile.draw()[0];\n    } while (this._discardedCard.isSpecialCard());\n\n    // select starting player\n    this._currentPlayer = this._players[\n      getRandomInt(0, this._players.length - 1)\n    ];\n  }\n\n  getPlayer(name: string) {\n    const player: Player = this._players[this.getPlayerIndex(name)];\n    if (!player) return undefined;\n    return player;\n  }\n\n  get currentPlayer(): Player {\n    return this._currentPlayer;\n  }\n\n  set currentPlayer(player: Player) {\n    player = this.getPlayer(player.name);\n    if (!player) throw new Error('The given player does not exist');\n\n    this._currentPlayer = player;\n  }\n\n  get nextPlayer() {\n    return this.getNextPlayer();\n  }\n\n  get discardedCard() {\n    return this._discardedCard;\n  }\n\n  set discardedCard(card: Card) {\n    if (!card) return;\n    if (card.color === undefined || card.color === null)\n      throw new Error('Discarded cards cannot have theirs colors as null');\n\n    this._discardedCard = card;\n  }\n\n  get players() {\n    return this._players;\n  }\n\n  get deck() {\n    return this.drawPile;\n  }\n\n  get playingDirection() {\n    return this.direction;\n  }\n\n  set playingDirection(dir: GameDirections) {\n    if (\n      dir !== GameDirections.CLOCKWISE &&\n      dir != GameDirections.COUNTER_CLOCKWISE\n    )\n      throw new Error('Invalid direction');\n\n    if (dir !== this.direction) this.reverseGame();\n  }\n\n  /**\n   * @fires Game#beforedraw\n   * @fires Game#draw\n   */\n  public draw(player?: Player, qty?: number, { silent } = { silent: false }) {\n    if (arguments.length == 0) player = this._currentPlayer;\n\n    qty = qty || 1;\n\n    if (!silent && !this.dispatchEvent(new BeforeDrawEvent(player, qty)))\n      return;\n\n    const drawnCards = this.privateDraw(player, qty);\n\n    if (!silent && !this.dispatchEvent(new DrawEvent(player, drawnCards)))\n      return;\n\n    this.drawn = true;\n    // reset UNO! yell state\n    this.yellers[player.name] = false;\n  }\n\n  /**\n   * @fires Game#beforepass\n   * @fires Game#nextplayer\n   */\n  pass() {\n    if (!this.drawn)\n      throw new Error(\n        `${this._currentPlayer} must draw at least one card before passing`,\n      );\n\n    if (!this.dispatchEvent(new BeforePassEvent(this._currentPlayer))) return;\n    this.goToNextPlayer();\n  }\n\n  /**\n   * @fires Game#beforecardplay\n   * @fires Game#cardplay\n   * @fires Game#nextplayer\n   * @fires Game#end\n   */\n  play(card: Card, { silent } = { silent: false }) {\n    const currentPlayer = this._currentPlayer;\n    if (!card) return;\n    // check if player has the card at hand...\n    if (!currentPlayer.hasCard(card))\n      throw new Error(`${currentPlayer} does not have card ${card} at hand`);\n\n    if (\n      !silent &&\n      !this.dispatchEvent(new BeforeCardPlayEvent(card, this._currentPlayer))\n    )\n      return;\n\n    if (card.color == undefined)\n      throw new Error('Card must have its color set before playing');\n    // check if the played card matches the card from the discard pile...\n    if (!card.matches(this._discardedCard))\n      throw new Error(\n        `${this._discardedCard}, from discard pile, does not match ${card}`,\n      );\n\n    currentPlayer.removeCard(card);\n    this._discardedCard = card;\n\n    if (\n      !silent &&\n      !this.dispatchEvent(new CardPlayEvent(card, this._currentPlayer))\n    )\n      return;\n\n    if (currentPlayer.hand.length == 0) {\n      const score = this.calculateScore();\n      // game is over, we have a winner!\n      this.dispatchEvent(new GameEndEvent(this._currentPlayer, score));\n      // TODO: how to stop game after it's finished? Finished variable? >.<\n      return;\n    }\n\n    switch (this._discardedCard.value) {\n      case Values.WILD_DRAW_FOUR:\n        this.privateDraw(this.getNextPlayer(), 4);\n        this.goToNextPlayer(true);\n        break;\n      case Values.DRAW_TWO:\n        this.privateDraw(this.getNextPlayer(), 2);\n        this.goToNextPlayer(true);\n        break;\n      case Values.SKIP:\n        this.goToNextPlayer(true);\n        break;\n      case Values.REVERSE:\n        this.reverseGame();\n        if (this._players.length == 2)\n          // Reverse works like Skip\n          this.goToNextPlayer(true);\n        break;\n    }\n\n    this.goToNextPlayer();\n  }\n\n  uno(yellingPlayer?: Player) {\n    yellingPlayer = yellingPlayer || this._currentPlayer;\n\n    // the users that will draw;\n    let drawingPlayers;\n\n    // if player is the one who has 1 card, just mark as yelled\n    // (he may yell UNO! before throwing his card, so he may have\n    // 2 cards at hand when yelling uno)\n    if (yellingPlayer.hand.length <= 2 && !this.yellers[yellingPlayer.name]) {\n      this.yellers[yellingPlayer.name] = true;\n      return [];\n    } else {\n      // else if the user has already yelled or if he has more than 2 cards...\n\n      // is there anyone with 1 card at hand that did not yell uno?\n      drawingPlayers = this._players.filter(\n        p => p.hand.length == 1 && !this.yellers[p.name],\n      );\n\n      // if there isn't anyone...\n      if (drawingPlayers.length == 0) {\n        // the player was lying, so he will draw\n        drawingPlayers = [yellingPlayer];\n      }\n    }\n\n    drawingPlayers.forEach(p => this.privateDraw(p, 2));\n\n    // return who drawn\n    return drawingPlayers;\n  }\n\n  fixPlayers(playerNames: string[]) {\n    if (\n      !playerNames ||\n      !playerNames.length ||\n      playerNames.length < 2 ||\n      playerNames.length > 10\n    )\n      throw new Error('There must be 2 to 10 players in the game');\n    else if (findDuplicates(playerNames).length)\n      throw new Error('Player names must be different');\n\n    return playerNames.map(player => {\n      return new Player(player);\n    });\n  }\n\n  getNextPlayer() {\n    let idx = this.getPlayerIndex(this._currentPlayer);\n\n    if (++idx == this._players.length) idx = 0;\n\n    return this._players[idx];\n  }\n\n  getPlayerIndex(playerName: string | Player) {\n    if (typeof playerName !== 'string') playerName = playerName.name;\n\n    return this._players.map(p => p.name).indexOf(playerName);\n  }\n\n  /**\n   * Set current player to the next in the line,\n   * with no validations, reseting all per-turn controllers\n   * (`draw`, ...)\n   *\n   * @fires Game#nextplayer\n   */\n  goToNextPlayer(silent?: boolean) {\n    this.drawn = false;\n\n    this._currentPlayer = this.getNextPlayer();\n    if (!silent) this.dispatchEvent(new NextPlayerEvent(this._currentPlayer));\n  }\n\n  reverseGame() {\n    this._players.reverse();\n    this.direction =\n      this.direction == GameDirections.CLOCKWISE\n        ? GameDirections.COUNTER_CLOCKWISE\n        : GameDirections.CLOCKWISE;\n  }\n\n  /**\n   * Add the given amount of cards to the given player's hand\n   * from the draw pile.\n   *\n   * @param player the player to deliver the cards\n   * @param amount the amount that must be drawn\n   * @returns the drawn cards\n   */\n  private privateDraw(player: Player, amount: number): Card[] {\n    if (!player) throw new Error('Player is mandatory');\n\n    // console.log(`draw ${amount} to ${player}`);\n\n    const cards = this.drawPile.draw(amount);\n\n    player.hand = player.hand.concat(cards);\n    return cards;\n  }\n\n  calculateScore() {\n    return this._players.map(player => player.hand).reduce((amount, cards) => {\n      amount += cards.reduce((s: number, c: Card) => (s += c.score), 0);\n      return amount;\n    }, 0);\n  }\n}\n\n/**\n * Returns a random integer between min (inclusive) and max (inclusive)\n * Using Math.round() will give you a non-uniform distribution!\n */\nfunction getRandomInt(min: number, max: number) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\n// https://stackoverflow.com/a/24968449/1574059\nfunction findDuplicates(array: string[]) {\n  type SingleWord = { count: number; name: string };\n  type WordCount = { [key: string]: number };\n\n  // expects an string array\n  const uniq: WordCount = array\n    .map((name, idx) => {\n      return { count: 1, name: name };\n    })\n    .reduce((a: WordCount, b: SingleWord) => {\n      a[b.name] = (a[b.name] || 0) + b.count;\n      return a;\n    }, {});\n\n  const duplicates = Object.keys(uniq).filter(a => uniq[a] > 1);\n\n  return duplicates;\n}\n\nfunction isObject(val: any) {\n  return val !== null && typeof val === 'object';\n}\n"],"sourceRoot":""}